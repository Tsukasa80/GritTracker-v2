<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GritTracker - ç²˜ã‚ŠåŠ›ã‚’å¯è¦–åŒ–ã™ã‚‹</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ç·‘ãƒ»é»’ç³»çµ±é…è‰² */
        :root {
            --color-green: #22c55e;
            --color-green-light: #4ade80;
            --color-green-dark: #16a34a;
            --color-black: #1f2937;
            --color-gray-dark: #374151;
        }
        
        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="range"].slider {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        /* WebKit (Chrome, Safari, Edge) */
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none !important;
            appearance: none !important;
            height: 24px !important;
            width: 24px !important;
            border-radius: 50% !important;
            background: linear-gradient(45deg, #22c55e, #1f2937) !important;
            cursor: pointer !important;
            border: 2px solid #ffffff !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
            transition: all 0.2s ease !important;
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        }
        
        /* Firefox */
        .slider::-moz-range-thumb {
            height: 24px !important;
            width: 24px !important;
            border-radius: 50% !important;
            background: linear-gradient(45deg, #22c55e, #1f2937) !important;
            cursor: pointer !important;
            border: 2px solid #ffffff !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
        }
        
        /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒˆãƒ©ãƒƒã‚¯ */
        .slider::-webkit-slider-track {
            height: 12px !important;
            border-radius: 6px !important;
            background: linear-gradient(to right, #22c55e, #4ade80, #1f2937) !important;
        }
        
        .slider::-moz-range-track {
            height: 12px !important;
            border-radius: 6px !important;
            background: linear-gradient(to right, #22c55e, #4ade80, #1f2937) !important;
            border: none !important;
        }
        
        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ©ã‚¹ */
        .bg-grit-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #f0fff4 30%, #22c55e 100%);
        }
        
        .btn-grit {
            background: linear-gradient(135deg, #22c55e, #1f2937);
            transition: all 0.2s ease;
        }
        
        .btn-grit:hover {
            background: linear-gradient(135deg, #16a34a, #374151);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .text-grit-gradient {
            background: linear-gradient(135deg, #22c55e, #1f2937);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .text-grit-primary { color: #22c55e; }
        .text-grit-secondary { color: #1f2937; }
        .bg-grit-primary { background-color: #22c55e; }
        .bg-grit-secondary { background-color: #1f2937; }
        .border-grit-primary { border-color: #22c55e; }
        .border-grit-secondary { border-color: #1f2937; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
        const generateId = () => `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        
        const formatDate = (date) => date.toISOString().split('T')[0];
        
        const getTodayDate = () => formatDate(new Date());
        
        const getWeekStartDate = (date) => {
            const d = new Date(date);
            const day = d.getDay();
            const diff = d.getDate() - day + (day === 0 ? -6 : 1);
            const monday = new Date(d.setDate(diff));
            return formatDate(monday);
        };
        
        const getWeekEndDate = (date) => {
            const d = new Date(date);
            const day = d.getDay();
            const diff = d.getDate() - day + (day === 0 ? 0 : 7);
            const sunday = new Date(d.setDate(diff));
            return formatDate(sunday);
        };
        
        const calculateEnduranceScore = (difficultyScore, enduredTime) => difficultyScore * enduredTime;
        
        const getLogsForWeek = (logs, weekStartDate) => {
            const startDate = new Date(weekStartDate);
            const endDate = new Date(startDate);
            endDate.setDate(startDate.getDate() + 6);
            
            return logs.filter(log => {
                const logDate = new Date(log.date);
                return logDate >= startDate && logDate <= endDate;
            });
        };
        
        const formatTimeFromMinutes = (minutes) => {
            if (minutes < 60) return `${minutes}åˆ†`;
            const hours = Math.floor(minutes / 60);
            const remainingMinutes = minutes % 60;
            return remainingMinutes === 0 ? `${hours}æ™‚é–“` : `${hours}æ™‚é–“${remainingMinutes}åˆ†`;
        };

        // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
        function App() {
            // çŠ¶æ…‹ç®¡ç†
            const [currentView, setCurrentView] = React.useState('dashboard');
            const [gritLogs, setGritLogs] = React.useState([]);
            const [weeklyReviews, setWeeklyReviews] = React.useState([]);
            const [rewardSettings, setRewardSettings] = React.useState([]);
            const [isMobileMenuOpen, setIsMobileMenuOpen] = React.useState(false);

            // LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
            React.useEffect(() => {
                const savedData = localStorage.getItem('grit-tracker-storage');
                if (savedData) {
                    try {
                        const data = JSON.parse(savedData);
                        if (data.state) {
                            setGritLogs(data.state.gritLogs || []);
                            setWeeklyReviews(data.state.weeklyReviews || []);
                            setRewardSettings(data.state.rewardSettings || []);
                        }
                    } catch (e) {
                        console.log('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
                    }
                }
            }, []);

            // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
            const saveToStorage = React.useCallback((newGritLogs, newWeeklyReviews, newRewardSettings) => {
                const data = {
                    state: {
                        gritLogs: newGritLogs || gritLogs,
                        weeklyReviews: newWeeklyReviews || weeklyReviews,
                        rewardSettings: newRewardSettings || rewardSettings,
                    },
                    version: 0
                };
                localStorage.setItem('grit-tracker-storage', JSON.stringify(data));
            }, [gritLogs, weeklyReviews, rewardSettings]);

            // GritLogè¿½åŠ 
            const addGritLog = (logData) => {
                const newLog = {
                    id: generateId(),
                    enduranceScore: calculateEnduranceScore(logData.difficultyScore, logData.enduredTime),
                    createdAt: new Date().toISOString(),
                    ...logData,
                };
                
                const newGritLogs = [...gritLogs, newLog];
                setGritLogs(newGritLogs);
                saveToStorage(newGritLogs, weeklyReviews, rewardSettings);
                checkAndCompleteRewards(newGritLogs);
            };

            // é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¿å­˜
            const saveWeeklyReview = (reviewData) => {
                const newReview = {
                    id: generateId(),
                    createdAt: new Date().toISOString(),
                    ...reviewData,
                };
                
                const existingIndex = weeklyReviews.findIndex(
                    review => review.weekStartDate === newReview.weekStartDate
                );
                
                let newWeeklyReviews;
                if (existingIndex >= 0) {
                    newWeeklyReviews = [...weeklyReviews];
                    newWeeklyReviews[existingIndex] = newReview;
                } else {
                    newWeeklyReviews = [...weeklyReviews, newReview];
                }
                
                setWeeklyReviews(newWeeklyReviews);
                saveToStorage(gritLogs, newWeeklyReviews, rewardSettings);
            };

            // ã”è¤’ç¾è¿½åŠ 
            const addRewardSetting = (rewardData) => {
                const newReward = {
                    id: generateId(),
                    isCompleted: false,
                    createdAt: new Date().toISOString(),
                    ...rewardData,
                };
                
                const newRewardSettings = [...rewardSettings, newReward];
                setRewardSettings(newRewardSettings);
                saveToStorage(gritLogs, weeklyReviews, newRewardSettings);
            };

            // ã”è¤’ç¾æ›´æ–°
            const updateRewardSetting = (id, updates) => {
                const newRewardSettings = rewardSettings.map(reward =>
                    reward.id === id ? { ...reward, ...updates } : reward
                );
                setRewardSettings(newRewardSettings);
                saveToStorage(gritLogs, weeklyReviews, newRewardSettings);
            };

            // ã”è¤’ç¾å‰Šé™¤
            const deleteRewardSetting = (id) => {
                const newRewardSettings = rewardSettings.filter(reward => reward.id !== id);
                setRewardSettings(newRewardSettings);
                saveToStorage(gritLogs, weeklyReviews, newRewardSettings);
            };

            // ã”è¤’ç¾ãƒã‚§ãƒƒã‚¯
            const checkAndCompleteRewards = (logs = gritLogs) => {
                const cumulativeScore = logs.reduce((total, log) => total + log.enduranceScore, 0);
                
                const updatedRewards = rewardSettings.map(reward => {
                    if (!reward.isCompleted && cumulativeScore >= reward.targetScore) {
                        return { ...reward, isCompleted: true, completedAt: new Date().toISOString() };
                    }
                    return reward;
                });
                
                setRewardSettings(updatedRewards);
                saveToStorage(logs, weeklyReviews, updatedRewards);
            };

            // çµ±è¨ˆè¨ˆç®—
            const getWeeklyTotalScore = () => {
                const today = new Date();
                const thisWeekStart = getWeekStartDate(today);
                const weekLogs = getLogsForWeek(gritLogs, thisWeekStart);
                return weekLogs.reduce((total, log) => total + log.enduranceScore, 0);
            };

            const getCumulativeTotalScore = () => {
                return gritLogs.reduce((total, log) => total + log.enduranceScore, 0);
            };

            const getWeeklyReview = (weekStartDate) => {
                return weeklyReviews.find(review => review.weekStartDate === weekStartDate) || null;
            };

            // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é …ç›®
            const navigationItems = [
                { key: 'dashboard', label: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', icon: 'ğŸ“Š', description: 'æˆæœã‚’å¯è¦–åŒ–' },
                { key: 'record', label: 'è¨˜éŒ²ã™ã‚‹', icon: 'âœï¸', description: 'ç²˜ã‚Šã‚’è¨˜éŒ²' },
                { key: 'review', label: 'æŒ¯ã‚Šè¿”ã‚Š', icon: 'ğŸ“‹', description: 'é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼' },
                { key: 'rewards', label: 'ã”è¤’ç¾', icon: 'ğŸ', description: 'ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³' },
            ];

            // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            const Dashboard = () => {
                const weeklyTotalScore = getWeeklyTotalScore();
                const cumulativeTotalScore = getCumulativeTotalScore();
                
                const recentLogs = React.useMemo(() => {
                    return [...gritLogs]
                        .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())
                        .slice(0, 5);
                }, [gritLogs]);

                const nextReward = React.useMemo(() => {
                    return rewardSettings
                        .filter(reward => !reward.isCompleted)
                        .sort((a, b) => a.targetScore - b.targetScore)[0];
                }, [rewardSettings]);

                const rewardProgress = nextReward ? Math.min((cumulativeTotalScore / nextReward.targetScore) * 100, 100) : 0;

                return (
                    <div className="bg-grit-gradient p-8 min-h-screen">
                        <div className="max-w-6xl mx-auto space-y-8">
                            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                            <div className="text-center py-8">
                                <div className="text-6xl mb-4">ğŸ†</div>
                                <h1 className="text-4xl font-bold text-grit-gradient mb-3 drop-shadow-lg">
                                    GritTracker<br/>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                                </h1>
                                <p className="text-gray-600 text-lg">ã‚ãªãŸã®ç²˜ã‚ŠåŠ›ã‚’å¯è¦–åŒ–ã—ã¦ã€æˆé•·ã‚’å®Ÿæ„Ÿã—ã¾ã—ã‚‡ã†</p>
                            </div>

                            {/* ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒƒãƒ„ */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {/* ä»Šé€±ã®åˆè¨ˆè€ä¹…ã‚¹ã‚³ã‚¢ */}
                                <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-800 mb-2">ä»Šé€±ã®åˆè¨ˆè€ä¹…ã‚¹ã‚³ã‚¢</h3>
                                            <p className="text-4xl font-bold text-grit-primary">{weeklyTotalScore.toLocaleString()}</p>
                                            <p className="text-gray-600 text-sm">ãƒã‚¤ãƒ³ãƒˆ</p>
                                        </div>
                                        <div className="text-4xl">ğŸ”¥</div>
                                    </div>
                                </div>

                                {/* ç´¯è¨ˆè€ä¹…ã‚¹ã‚³ã‚¢ */}
                                <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                    <div className="flex items-center justify-between">
                                        <div>
                                            <h3 className="text-lg font-semibold text-gray-800 mb-2">ç´¯è¨ˆè€ä¹…ã‚¹ã‚³ã‚¢</h3>
                                            <p className="text-4xl font-bold text-grit-secondary">{cumulativeTotalScore.toLocaleString()}</p>
                                            <p className="text-gray-600 text-sm">ç·ãƒã‚¤ãƒ³ãƒˆ</p>
                                        </div>
                                        <div className="text-4xl">ğŸ†</div>
                                    </div>
                                </div>
                            </div>

                            {/* ã”è¤’ç¾é€²æ— */}
                            {nextReward && (
                                <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                    <div className="flex items-center justify-between mb-6">
                                        <div>
                                            <h3 className="text-2xl font-bold text-gray-800">æ¬¡ã®ã”è¤’ç¾ã¾ã§</h3>
                                            <p className="text-gray-600 font-medium">{nextReward.rewardContent}</p>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-2xl font-bold text-gray-700">{rewardProgress.toFixed(1)}%</p>
                                            <p className="text-gray-600 text-sm">å®Œäº†</p>
                                        </div>
                                    </div>
                                    
                                    <div className="mb-4">
                                        <div className="flex justify-between text-sm font-semibold text-gray-700 mb-3">
                                            <span>ç¾åœ¨ã®ã‚¹ã‚³ã‚¢</span>
                                            <span>{cumulativeTotalScore.toLocaleString()} / {nextReward.targetScore.toLocaleString()}</span>
                                        </div>
                                        <div className="w-full bg-gray-200 rounded-full h-6 overflow-hidden">
                                            <div 
                                                className="h-full bg-grit-gradient rounded-full transition-all duration-700"
                                                style={{ width: `${rewardProgress}%` }}
                                            />
                                        </div>
                                    </div>
                                    
                                    {rewardProgress >= 100 && (
                                        <div className="text-center py-4 bg-green-50 rounded-2xl border border-green-200">
                                            <span className="text-3xl mb-2 block">ğŸ‰</span>
                                            <span className="text-xl font-bold text-green-800">ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</span>
                                            <p className="text-green-600 mt-1">ã”è¤’ç¾ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ãŸï¼</p>
                                        </div>
                                    )}
                                </div>
                            )}

                            {/* æœ€è¿‘ã®è¨˜éŒ² */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <h3 className="text-2xl font-bold text-gray-800 mb-8 flex items-center">
                                    <span className="mr-3">ğŸ•’</span>æœ€è¿‘ã®è¨˜éŒ²
                                </h3>
                                
                                {recentLogs.length === 0 ? (
                                    <div className="text-center py-12">
                                        <div className="text-6xl mb-4">ğŸ“</div>
                                        <p className="text-xl font-semibold text-gray-700 mb-3">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                                        <p className="text-gray-600">ã€Œè¨˜éŒ²ã™ã‚‹ã€ã‹ã‚‰æœ€åˆã®ç²˜ã‚Šè¨˜éŒ²ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ï¼</p>
                                    </div>
                                ) : (
                                    <div className="space-y-4">
                                        {recentLogs.map((log) => (
                                            <div key={log.id} className="border border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all">
                                                <div className="flex justify-between items-start">
                                                    <div className="flex-1">
                                                        <h4 className="font-bold text-gray-800 text-lg mb-2">{log.taskName}</h4>
                                                        <div className="flex items-center space-x-6 text-sm text-gray-600 mb-3">
                                                            <span>ğŸ“… {log.date}</span>
                                                            <span>â±ï¸ {log.enduredTime}åˆ†</span>
                                                            <span className="bg-green-100 text-green-700 px-3 py-1 rounded-full font-semibold">
                                                                è‹¦ã—ã•: {log.difficultyScore}/10
                                                            </span>
                                                        </div>
                                                        {log.details && (
                                                            <p className="text-gray-700 italic bg-gray-50 p-3 rounded-lg">
                                                                "{log.details}"
                                                            </p>
                                                        )}
                                                    </div>
                                                    <div className="bg-gradient-to-br from-green-500 to-gray-800 text-white w-16 h-16 rounded-xl flex items-center justify-center shadow-lg ml-4">
                                                        <div className="text-center">
                                                            <div className="text-lg font-bold">{log.enduranceScore}</div>
                                                            <div className="text-xs opacity-90">pt</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* ãƒ‡ãƒ¼ã‚¿ç®¡ç† */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <h3 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                                    <span className="mr-3">ğŸ’¾</span>ãƒ‡ãƒ¼ã‚¿ç®¡ç†
                                </h3>
                                <p className="text-gray-600 mb-6">ã‚¹ãƒãƒ›ã¨PCã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã§ãã¾ã™</p>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {/* ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ */}
                                    <div className="bg-blue-50 p-6 rounded-xl border border-blue-200">
                                        <h4 className="font-bold text-gray-800 mb-3 flex items-center">
                                            <span className="mr-2">ğŸ“¤</span>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                                        </h4>
                                        <p className="text-sm text-gray-600 mb-4">ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä»–ã®ç«¯æœ«ã«ç§»è¡Œã§ãã¾ã™</p>
                                        <button
                                            onClick={() => {
                                                const data = localStorage.getItem('grit-tracker-storage');
                                                if (data) {
                                                    navigator.clipboard.writeText(data).then(() => {
                                                        alert('âœ… ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\n\nğŸ“± ä»–ã®ç«¯æœ«ã§ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚');
                                                    }).catch(() => {
                                                        const textarea = document.createElement('textarea');
                                                        textarea.value = data;
                                                        document.body.appendChild(textarea);
                                                        textarea.select();
                                                        document.execCommand('copy');
                                                        document.body.removeChild(textarea);
                                                        alert('âœ… ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\n\nğŸ“± ä»–ã®ç«¯æœ«ã§ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚');
                                                    });
                                                } else {
                                                    alert('âŒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
                                                }
                                            }}
                                            className="w-full bg-blue-500 text-white px-4 py-3 rounded-xl hover:bg-blue-600 transition-colors font-semibold flex items-center justify-center space-x-2"
                                        >
                                            <span>ğŸ“¤</span>
                                            <span>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼</span>
                                        </button>
                                    </div>

                                    {/* ã‚¤ãƒ³ãƒãƒ¼ãƒˆ */}
                                    <div className="bg-green-50 p-6 rounded-xl border border-green-200">
                                        <h4 className="font-bold text-gray-800 mb-3 flex items-center">
                                            <span className="mr-2">ğŸ“¥</span>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                                        </h4>
                                        <p className="text-sm text-gray-600 mb-4">ä»–ã®ç«¯æœ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™</p>
                                        <button
                                            onClick={() => {
                                                const importData = prompt('ğŸ“¥ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:\n\nâš ï¸ ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚');
                                                if (importData) {
                                                    try {
                                                        JSON.parse(importData);
                                                        localStorage.setItem('grit-tracker-storage', importData);
                                                        alert('âœ… ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\nğŸ”„ ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¾ã™ã€‚');
                                                        window.location.reload();
                                                    } catch (e) {
                                                        alert('âŒ ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚\n\næ­£ã—ã„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚');
                                                    }
                                                }
                                            }}
                                            className="w-full bg-green-500 text-white px-4 py-3 rounded-xl hover:bg-green-600 transition-colors font-semibold flex items-center justify-center space-x-2"
                                        >
                                            <span>ğŸ“¥</span>
                                            <span>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿</span>
                                        </button>
                                    </div>
                                </div>

                                {/* ä½¿ã„æ–¹èª¬æ˜ */}
                                <div className="mt-6 bg-yellow-50 p-4 rounded-xl border border-yellow-200">
                                    <h5 className="font-bold text-gray-800 mb-2 flex items-center">
                                        <span className="mr-2">ğŸ’¡</span>ä½¿ã„æ–¹
                                    </h5>
                                    <ol className="text-sm text-gray-700 space-y-1 pl-4">
                                        <li>1. ğŸ“± PCå´ã§ã€Œãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                                        <li>2. ğŸ“¨ LINEã‚„ãƒ¡ãƒ¼ãƒ«ã§è‡ªåˆ†ã«é€ä¿¡</li>
                                        <li>3. ğŸ“± ã‚¹ãƒãƒ›ã§å—ä¿¡ã—ã¦ã€Œãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€ã«è²¼ã‚Šä»˜ã‘</li>
                                    </ol>
                                </div>
                            </div>

                            {/* åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl text-center shadow-2xl">
                                <div className="text-4xl mb-4">ğŸ’ª</div>
                                <h3 className="text-2xl font-bold text-gray-800 mb-4">
                                    {cumulativeTotalScore === 0 ? 
                                        'æœ€åˆã®ä¸€æ­©ã‚’è¸ã¿å‡ºãã†ï¼' : 
                                        cumulativeTotalScore > 1000 ? 
                                        'ç´ æ™´ã‚‰ã—ã„ç²˜ã‚ŠåŠ›ã§ã™ï¼ç¶™ç¶šã¯åŠ›ãªã‚Šï¼' :
                                        'ç€å®Ÿã«æˆé•·ã—ã¦ã„ã¾ã™ï¼ã“ã®èª¿å­ã§é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼'
                                    }
                                </h3>
                                <p className="text-gray-700 text-lg leading-relaxed">
                                    {cumulativeTotalScore === 0 ?
                                        'å°ã•ãªå›°é›£ã§ã‚‚è¨˜éŒ²ã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚ã‚ãªãŸã®æˆé•·ãŒè¦‹ãˆã‚‹åŒ–ã•ã‚Œã¾ã™ã€‚' :
                                        'æ¯æ—¥ã®å°ã•ãªã€Œç²˜ã‚Šã€ãŒã€å¤§ããªæˆæœã«ã¤ãªãŒã£ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã‚’ä¿¡ã˜ã¦ç¶šã‘ã¦ã„ãã¾ã—ã‚‡ã†ï¼'
                                    }
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };

            // ã‚¯ã‚¤ãƒƒã‚¯è¨˜éŒ²ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            const QuickRecord = () => {
                const [formData, setFormData] = React.useState({
                    date: getTodayDate(),
                    taskName: '',
                    difficultyScore: 5,
                    enduredTime: 0,
                    details: '',
                    wasSuccessful: undefined,
                });

                const handleSubmit = (e) => {
                    e.preventDefault();
                    
                    if (!formData.taskName.trim() || formData.enduredTime <= 0) {
                        alert('ã‚¿ã‚¹ã‚¯åã¨ç²˜ã£ãŸæ™‚é–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                        return;
                    }

                    addGritLog(formData);
                    
                    setFormData({
                        date: getTodayDate(),
                        taskName: '',
                        difficultyScore: 5,
                        enduredTime: 0,
                        details: '',
                        wasSuccessful: undefined,
                    });
                    
                    alert('è¨˜éŒ²ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ğŸ‰ ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼');
                };

                const enduranceScore = calculateEnduranceScore(formData.difficultyScore, formData.enduredTime);

                return (
                    <div className="bg-grit-gradient p-8 min-h-screen">
                        <div className="max-w-4xl mx-auto">
                            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                            <div className="text-center py-8">
                                <div className="text-6xl mb-4">âœï¸</div>
                                <h1 className="text-4xl font-bold text-grit-gradient mb-3 drop-shadow-lg">ç²˜ã‚Šè¨˜éŒ²ã‚’ä½œæˆ</h1>
                                <p className="text-gray-600 text-lg">è‹¦ã—ã•ã‚’æˆé•·ã®è¨¼ã«å¤‰ãˆã¾ã—ã‚‡ã†</p>
                            </div>

                            {/* ãƒ•ã‚©ãƒ¼ãƒ  */}
                            <form onSubmit={handleSubmit} className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl space-y-6">
                                {/* æ—¥ä»˜ã¨ã‚¿ã‚¹ã‚¯å */}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label className="block text-sm font-bold text-gray-800 mb-2">æ—¥ä»˜</label>
                                        <input
                                            type="date"
                                            value={formData.date}
                                            onChange={(e) => setFormData({ ...formData, date: e.target.value })}
                                            className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                            required
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-bold text-gray-800 mb-2">
                                            ä½•ã«ç²˜ã‚Šã¾ã—ãŸã‹ï¼Ÿ <span className="text-red-500">*</span>
                                        </label>
                                        <input
                                            type="text"
                                            value={formData.taskName}
                                            onChange={(e) => setFormData({ ...formData, taskName: e.target.value })}
                                            placeholder="ä¾‹ï¼šæ•°å­¦ã®å‹‰å¼·ã€ç­‹ãƒˆãƒ¬ã€è‹±èªå­¦ç¿’ãªã©"
                                            className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                            required
                                        />
                                    </div>
                                </div>

                                {/* è‹¦ã—ã•ã‚¹ã‚³ã‚¢ */}
                                <div>
                                    <label className="block text-sm font-bold text-gray-800 mb-2">
                                        ğŸ“Š è‹¦ã—ã•ãƒ¬ãƒ™ãƒ«: <span className="text-grit-primary font-bold ml-2">{formData.difficultyScore}/10</span>
                                    </label>
                                    <input
                                        type="range"
                                        min="1"
                                        max="10"
                                        value={formData.difficultyScore}
                                        onChange={(e) => setFormData({ ...formData, difficultyScore: parseInt(e.target.value) })}
                                        className="w-full h-3 rounded-lg cursor-pointer slider"
                                        style={{
                                            background: 'linear-gradient(to right, #22c55e, #4ade80, #1f2937)'
                                        }}
                                    />
                                    <div className="flex justify-between text-xs text-gray-600 font-medium mt-1">
                                        <span>1 (æ¥½å‹)</span>
                                        <span>5 (æ™®é€š)</span>
                                        <span>10 (æ¿€ã—ã„)</span>
                                    </div>
                                </div>

                                {/* ç²˜ã£ãŸæ™‚é–“ */}
                                <div>
                                    <label className="block text-sm font-bold text-gray-800 mb-2">
                                        â±ï¸ é ‘å¼µã£ãŸæ™‚é–“ï¼ˆåˆ†ï¼‰ <span className="text-red-500">*</span>
                                    </label>
                                    <input
                                        type="number"
                                        min="1"
                                        max="480"
                                        value={formData.enduredTime || ''}
                                        onChange={(e) => setFormData({ ...formData, enduredTime: parseInt(e.target.value) || 0 })}
                                        placeholder="åˆ†æ•°ã‚’å…¥åŠ›"
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                        required
                                    />
                                </div>

                                {/* è€ä¹…ã‚¹ã‚³ã‚¢è¡¨ç¤º */}
                                {formData.enduredTime > 0 && (
                                    <div className="bg-green-50 p-6 rounded-xl border border-green-200 text-center">
                                        <div className="text-2xl mb-2">ğŸ“Š</div>
                                        <h3 className="text-xl font-bold text-gray-800 mb-2">äºˆæƒ³ç²å¾—ãƒã‚¤ãƒ³ãƒˆ</h3>
                                        <div className="text-4xl font-extrabold text-grit-primary mb-2">
                                            {enduranceScore}
                                        </div>
                                        <p className="text-sm text-gray-600">
                                            è‹¦ã—ã• {formData.difficultyScore} Ã— æ™‚é–“ {formData.enduredTime}åˆ† = {enduranceScore}ãƒã‚¤ãƒ³ãƒˆ
                                        </p>
                                    </div>
                                )}

                                {/* å®Œäº†çŠ¶æ³ */}
                                <div>
                                    <label className="block text-sm font-bold text-gray-800 mb-3">
                                        â­ çµæœã¯ã©ã†ã§ã—ãŸã‹ï¼Ÿ
                                    </label>
                                    <div className="flex space-x-4">
                                        <label className="flex items-center space-x-2 cursor-pointer">
                                            <input
                                                type="radio"
                                                name="wasSuccessful"
                                                checked={formData.wasSuccessful === true}
                                                onChange={() => setFormData({ ...formData, wasSuccessful: true })}
                                                className="w-4 h-4"
                                            />
                                            <span className="text-green-700 font-semibold">âœ… å®Œäº†ãƒ»æˆåŠŸ</span>
                                        </label>
                                        <label className="flex items-center space-x-2 cursor-pointer">
                                            <input
                                                type="radio"
                                                name="wasSuccessful"
                                                checked={formData.wasSuccessful === false}
                                                onChange={() => setFormData({ ...formData, wasSuccessful: false })}
                                                className="w-4 h-4"
                                            />
                                            <span className="text-gray-700 font-semibold">ğŸ’ª é€”ä¸­ãƒ»æŒ‘æˆ¦ä¸­</span>
                                        </label>
                                    </div>
                                </div>

                                {/* è©³ç´°ãƒ¡ãƒ¢ */}
                                <div>
                                    <label className="block text-sm font-bold text-gray-800 mb-2">æ„Ÿæƒ³ã‚„è©³ç´°ï¼ˆä»»æ„ï¼‰</label>
                                    <textarea
                                        value={formData.details}
                                        onChange={(e) => setFormData({ ...formData, details: e.target.value })}
                                        placeholder="ã©ã‚“ãªã“ã¨ãŒå¤§å¤‰ã§ã—ãŸã‹ï¼Ÿã©ã†ä¹—ã‚Šè¶Šãˆã¾ã—ãŸã‹ï¼Ÿ"
                                        rows={4}
                                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors resize-none"
                                    />
                                </div>

                                {/* ãƒœã‚¿ãƒ³ */}
                                <button
                                    type="submit"
                                    className="w-full btn-grit text-white px-6 py-4 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center space-x-2"
                                >
                                    <span className="text-xl">ğŸ’¾</span>
                                    <span>è¨˜éŒ²ã‚’ä¿å­˜</span>
                                </button>
                            </form>

                            {/* åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                            <div className="mt-8 bg-white/95 backdrop-blur-sm p-6 rounded-2xl shadow-2xl text-center">
                                <div className="text-3xl mb-4">ğŸŒŸ</div>
                                <h3 className="text-lg font-bold text-gray-800 mb-2">å°ã•ãªç²˜ã‚Šã‚‚å¤§ããªæˆé•·ã®ç¨®ï¼</h3>
                                <p className="text-gray-700">
                                    ã©ã‚“ãªã«å°ã•ãªåŠªåŠ›ã§ã‚‚è¨˜éŒ²ã™ã‚‹ã“ã¨ã§ã€ã‚ãªãŸã®æˆé•·ãŒè¦‹ãˆã‚‹åŒ–ã•ã‚Œã¾ã™ã€‚ç¶™ç¶šã“ããŒæœ€å¤§ã®åŠ›ã§ã™ï¼
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };

            // é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            const WeeklyReview = () => {
                const today = new Date();
                const thisWeekStart = getWeekStartDate(today);
                const thisWeekEnd = getWeekEndDate(today);
                
                const thisWeekLogs = React.useMemo(() => {
                    return getLogsForWeek(gritLogs, thisWeekStart)
                        .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());
                }, [gritLogs, thisWeekStart]);

                const existingReview = getWeeklyReview(thisWeekStart);

                const [selectedBestLogs, setSelectedBestLogs] = React.useState(existingReview?.bestOfWeek || []);
                const [reflections, setReflections] = React.useState({
                    emotions: existingReview?.reflections.emotions || '',
                    results: existingReview?.reflections.results || '',
                    messageToSelf: existingReview?.reflections.messageToSelf || '',
                });

                const toggleBestLog = (logId) => {
                    setSelectedBestLogs(prev => {
                        if (prev.includes(logId)) {
                            return prev.filter(id => id !== logId);
                        } else if (prev.length < 3) {
                            return [...prev, logId];
                        } else {
                            return [prev[1], prev[2], logId];
                        }
                    });
                };

                const handleSave = () => {
                    if (reflections.emotions.trim() && reflections.results.trim() && reflections.messageToSelf.trim()) {
                        saveWeeklyReview({
                            weekStartDate: thisWeekStart,
                            weekEndDate: thisWeekEnd,
                            bestOfWeek: selectedBestLogs,
                            reflections,
                        });
                        alert('é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Šã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ğŸ‰ ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼');
                    } else {
                        alert('ã™ã¹ã¦ã®æŒ¯ã‚Šè¿”ã‚Šé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    }
                };

                const weekStats = React.useMemo(() => {
                    const totalScore = thisWeekLogs.reduce((sum, log) => sum + log.enduranceScore, 0);
                    const totalTime = thisWeekLogs.reduce((sum, log) => sum + log.enduredTime, 0);
                    const avgDifficulty = thisWeekLogs.length > 0 
                        ? thisWeekLogs.reduce((sum, log) => sum + log.difficultyScore, 0) / thisWeekLogs.length 
                        : 0;
                    
                    return { totalScore, totalTime, avgDifficulty: Math.round(avgDifficulty * 10) / 10 };
                }, [thisWeekLogs]);

                return (
                    <div className="bg-grit-gradient p-8 min-h-screen">
                        <div className="max-w-6xl mx-auto space-y-8">
                            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                            <div className="text-center py-8">
                                <div className="text-6xl mb-4">ğŸ“‹</div>
                                <h1 className="text-4xl font-bold text-grit-gradient mb-3 drop-shadow-lg">é€±æ¬¡æŒ¯ã‚Šè¿”ã‚Š</h1>
                                <p className="text-gray-600 text-lg mb-4">{thisWeekStart} ã€œ {thisWeekEnd}</p>
                                <p className="text-gray-600">ã“ã®é€±ã®ã€Œç²˜ã‚Šã€ã‚’æŒ¯ã‚Šè¿”ã‚Šã€æˆé•·ã‚’å®Ÿæ„Ÿã—ã¾ã—ã‚‡ã†</p>
                            </div>

                            {/* ä»Šé€±ã®çµ±è¨ˆ */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                                    <span className="mr-3">ğŸ“Š</span>ä»Šé€±ã®æˆæœ
                                </h2>
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-6">
                                    <div className="text-center bg-white p-6 rounded-xl shadow">
                                        <div className="text-3xl font-bold text-grit-primary">{thisWeekLogs.length}</div>
                                        <div className="text-sm text-gray-700 font-medium">è¨˜éŒ²æ•°</div>
                                    </div>
                                    <div className="text-center bg-white p-6 rounded-xl shadow">
                                        <div className="text-3xl font-bold text-grit-secondary">{weekStats.totalScore}</div>
                                        <div className="text-sm text-gray-700 font-medium">åˆè¨ˆè€ä¹…ã‚¹ã‚³ã‚¢</div>
                                    </div>
                                    <div className="text-center bg-white p-6 rounded-xl shadow">
                                        <div className="text-3xl font-bold text-grit-primary">{formatTimeFromMinutes(weekStats.totalTime)}</div>
                                        <div className="text-sm text-gray-700 font-medium">åˆè¨ˆç²˜ã‚Šæ™‚é–“</div>
                                    </div>
                                    <div className="text-center bg-white p-6 rounded-xl shadow">
                                        <div className="text-3xl font-bold text-grit-secondary">{weekStats.avgDifficulty}</div>
                                        <div className="text-sm text-gray-700 font-medium">å¹³å‡è‹¦ã—ã•</div>
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                {/* å·¦ã‚«ãƒ©ãƒ : ãƒ­ã‚°ä¸€è¦§ã¨ãƒ™ã‚¹ãƒˆ3é¸æŠ */}
                                <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                                        <span className="mr-3">ğŸ“…</span>ä»Šé€±ã®è¨˜éŒ²ä¸€è¦§
                                    </h2>
                                    
                                    {thisWeekLogs.length === 0 ? (
                                        <div className="text-center py-12 text-gray-600">
                                            <div className="text-4xl mb-4">ğŸ“</div>
                                            <p className="text-lg font-semibold mb-2">ä»Šé€±ã¯ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                                            <p className="text-sm">è¨˜éŒ²ã‚’ä½œæˆã—ã¦ã‹ã‚‰æŒ¯ã‚Šè¿”ã‚Šã‚’è¡Œã„ã¾ã—ã‚‡ã†ï¼</p>
                                        </div>
                                    ) : (
                                        <div className="space-y-4">
                                            {thisWeekLogs.map((log) => (
                                                <div 
                                                    key={log.id}
                                                    onClick={() => toggleBestLog(log.id)}
                                                    className={`border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-lg ${
                                                        selectedBestLogs.includes(log.id)
                                                            ? 'border-grit-primary bg-green-50'
                                                            : 'border-gray-200 hover:border-grit-primary bg-white'
                                                    }`}
                                                >
                                                    <div className="flex justify-between items-start">
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-3 mb-3">
                                                                <div className={`w-8 h-8 rounded-full border-2 flex items-center justify-center font-bold text-sm ${
                                                                    selectedBestLogs.includes(log.id)
                                                                        ? 'border-grit-primary bg-grit-primary text-white'
                                                                        : 'border-gray-300 text-gray-500'
                                                                }`}>
                                                                    {selectedBestLogs.includes(log.id) ? (
                                                                        selectedBestLogs.indexOf(log.id) + 1
                                                                    ) : (
                                                                        '+'
                                                                    )}
                                                                </div>
                                                                <h3 className="font-bold text-gray-800 text-lg">{log.taskName}</h3>
                                                            </div>
                                                            
                                                            <div className="flex items-center space-x-6 text-sm text-gray-600 mb-3 ml-11">
                                                                <span>ğŸ“… {log.date}</span>
                                                                <span>â±ï¸ {formatTimeFromMinutes(log.enduredTime)}</span>
                                                                <span className="bg-green-100 text-green-700 px-3 py-1 rounded-full font-semibold">
                                                                    è‹¦ã—ã•: {log.difficultyScore}/10
                                                                </span>
                                                                {log.wasSuccessful !== undefined && (
                                                                    <span className={`px-3 py-1 rounded-full font-semibold text-sm ${
                                                                        log.wasSuccessful ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'
                                                                    }`}>
                                                                        {log.wasSuccessful ? 'âœ… å®Œäº†' : 'ğŸ’ª é€”ä¸­'}
                                                                    </span>
                                                                )}
                                                            </div>
                                                            
                                                            {log.details && (
                                                                <p className="text-sm text-gray-700 italic bg-blue-50 p-3 rounded-lg ml-11">
                                                                    "{log.details}"
                                                                </p>
                                                            )}
                                                        </div>
                                                        <div className="bg-gradient-to-br from-green-500 to-gray-800 text-white w-16 h-16 rounded-xl flex items-center justify-center shadow-lg ml-4">
                                                            <div className="text-center">
                                                                <div className="text-lg font-bold">{log.enduranceScore}</div>
                                                                <div className="text-xs opacity-90">pt</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                    
                                    {thisWeekLogs.length > 0 && (
                                        <div className="mt-6 p-4 bg-green-50 border border-green-200 rounded-xl">
                                            <div className="flex items-center text-sm text-gray-800">
                                                <span className="mr-2">â­</span>
                                                <span className="font-semibold">
                                                    ä»Šé€±ã®ãƒ™ã‚¹ãƒˆç²˜ã‚ŠTOP3ã‚’é¸æŠã—ã¦ãã ã•ã„ ({selectedBestLogs.length}/3)
                                                </span>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                {/* å³ã‚«ãƒ©ãƒ : æŒ¯ã‚Šè¿”ã‚Šè³ªå• */}
                                <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-8 flex items-center">
                                        <span className="mr-3">â­</span>æŒ¯ã‚Šè¿”ã‚Šã®å•ã„
                                    </h2>
                                    
                                    <div className="space-y-8">
                                        {/* è³ªå•1 */}
                                        <div>
                                            <label className="block text-sm font-bold text-gray-800 mb-3">
                                                ğŸ’­ ä»Šé€±ã€ã©ã‚“ãªæ„Ÿæƒ…ã¨é—˜ã£ãŸã‹ï¼Ÿ
                                            </label>
                                            <textarea
                                                value={reflections.emotions}
                                                onChange={(e) => setReflections({ ...reflections, emotions: e.target.value })}
                                                placeholder="ä¸å®‰ã€ç„¦ã‚Šã€è«¦ã‚ãŸã„æ°—æŒã¡ã€é¢å€’ãã•ã•ãªã©ã€ã©ã‚“ãªæ„Ÿæƒ…ã¨å‘ãåˆã„ã¾ã—ãŸã‹ï¼Ÿ"
                                                rows={4}
                                                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                            />
                                        </div>

                                        {/* è³ªå•2 */}
                                        <div>
                                            <label className="block text-sm font-bold text-gray-800 mb-3">
                                                ğŸŒ± ç²˜ã£ãŸå¾Œã€ã©ã‚“ãªã“ã¨ãŒèµ·ããŸã‹ï¼Ÿ
                                            </label>
                                            <textarea
                                                value={reflections.results}
                                                onChange={(e) => setReflections({ ...reflections, results: e.target.value })}
                                                placeholder="æˆé•·ã®å®Ÿæ„Ÿã€é”æˆæ„Ÿã€æ–°ã—ã„ç™ºè¦‹ã€å‘¨å›²ã®åå¿œãªã©ã€ç²˜ã£ãŸçµæœã©ã‚“ãªå¤‰åŒ–ãŒã‚ã‚Šã¾ã—ãŸã‹ï¼Ÿ"
                                                rows={4}
                                                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                            />
                                        </div>

                                        {/* è³ªå•3 */}
                                        <div>
                                            <label className="block text-sm font-bold text-gray-800 mb-3">
                                                ğŸ¯ ã€Œç²˜ã£ãŸéå»ã®è‡ªåˆ†ã€ã«ã€ä»Šã©ã†è¨€ã„ãŸã„ã‹ï¼Ÿ
                                            </label>
                                            <textarea
                                                value={reflections.messageToSelf}
                                                onChange={(e) => setReflections({ ...reflections, messageToSelf: e.target.value })}
                                                placeholder="é ‘å¼µã£ãŸè‡ªåˆ†ã«å¯¾ã™ã‚‹æ„Ÿè¬ã€åŠ±ã¾ã—ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãªã©ã€ã©ã‚“ãªè¨€è‘‰ã‚’ã‹ã‘ãŸã„ã§ã™ã‹ï¼Ÿ"
                                                rows={4}
                                                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                            />
                                        </div>

                                        {/* ä¿å­˜ãƒœã‚¿ãƒ³ */}
                                        <button
                                            onClick={handleSave}
                                            disabled={thisWeekLogs.length === 0}
                                            className="w-full btn-grit text-white font-bold py-4 px-8 rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2"
                                        >
                                            <span className="text-xl">ğŸ’¾</span>
                                            <span>æŒ¯ã‚Šè¿”ã‚Šã‚’ä¿å­˜ã™ã‚‹</span>
                                        </button>

                                        {existingReview && (
                                            <div className="text-center p-4 bg-green-50 rounded-xl border border-green-200">
                                                <p className="text-sm text-green-700 font-semibold">
                                                    âœ… ã“ã®é€±ã®æŒ¯ã‚Šè¿”ã‚Šã¯ä¿å­˜æ¸ˆã¿ã§ã™
                                                </p>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl text-center shadow-2xl">
                                <div className="text-4xl mb-6">âœ¨</div>
                                <h3 className="text-2xl font-bold text-gray-800 mb-4">æŒ¯ã‚Šè¿”ã‚Šã¯æˆé•·ã¸ã®ç¬¬ä¸€æ­©</h3>
                                <p className="text-gray-700 text-lg leading-relaxed">
                                    éå»ã®è‡ªåˆ†ã®åŠªåŠ›ã‚’èªã‚ã€æ„Ÿè¬ã™ã‚‹ã“ã¨ã§ã€æœªæ¥ã¸ã®åŸå‹•åŠ›ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚
                                    æ¯é€±ã®å°ã•ãªæŒ¯ã‚Šè¿”ã‚ŠãŒã€å¤§ããªæˆé•·ã«ã¤ãªãŒã£ã¦ã„ãã¾ã™ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                );
            };

            // ã”è¤’ç¾è¨­å®šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
            const RewardSettings = () => {
                const [newReward, setNewReward] = React.useState({
                    targetScore: '',
                    rewardContent: '',
                });

                const [editingId, setEditingId] = React.useState(null);
                const [editForm, setEditForm] = React.useState({
                    targetScore: '',
                    rewardContent: '',
                });

                const cumulativeScore = getCumulativeTotalScore();

                const handleAddReward = (e) => {
                    e.preventDefault();
                    
                    const targetScore = parseInt(newReward.targetScore);
                    if (!targetScore || targetScore <= 0 || !newReward.rewardContent.trim()) {
                        alert('ç›®æ¨™ã‚¹ã‚³ã‚¢ã¨ã”è¤’ç¾å†…å®¹ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                        return;
                    }

                    const existingScores = rewardSettings.map(r => r.targetScore);
                    if (existingScores.includes(targetScore)) {
                        alert('åŒã˜ç›®æ¨™ã‚¹ã‚³ã‚¢ã®ã”è¤’ç¾ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™ï¼');
                        return;
                    }

                    addRewardSetting({
                        targetScore,
                        rewardContent: newReward.rewardContent.trim(),
                    });

                    setNewReward({ targetScore: '', rewardContent: '' });
                    alert('ã”è¤’ç¾ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼ğŸ‰ ç›®æ¨™ã«å‘ã‹ã£ã¦é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼');
                };

                const handleStartEdit = (reward) => {
                    setEditingId(reward.id);
                    setEditForm({
                        targetScore: reward.targetScore.toString(),
                        rewardContent: reward.rewardContent,
                    });
                };

                const handleSaveEdit = () => {
                    if (!editingId) return;
                    
                    const targetScore = parseInt(editForm.targetScore);
                    if (!targetScore || targetScore <= 0 || !editForm.rewardContent.trim()) {
                        alert('ç›®æ¨™ã‚¹ã‚³ã‚¢ã¨ã”è¤’ç¾å†…å®¹ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ï¼');
                        return;
                    }

                    updateRewardSetting(editingId, {
                        targetScore,
                        rewardContent: editForm.rewardContent.trim(),
                    });

                    setEditingId(null);
                    setEditForm({ targetScore: '', rewardContent: '' });
                    alert('ã”è¤’ç¾ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼âœ¨');
                };

                const handleCancelEdit = () => {
                    setEditingId(null);
                    setEditForm({ targetScore: '', rewardContent: '' });
                };

                const handleDelete = (id, rewardContent) => {
                    if (window.confirm(`ã€Œ${rewardContent}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                        deleteRewardSetting(id);
                        alert('ã”è¤’ç¾ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
                    }
                };

                const sortedRewards = [...rewardSettings].sort((a, b) => {
                    if (a.isCompleted && !b.isCompleted) return 1;
                    if (!a.isCompleted && b.isCompleted) return -1;
                    return a.targetScore - b.targetScore;
                });

                return (
                    <div className="bg-grit-gradient p-8 min-h-screen">
                        <div className="max-w-6xl mx-auto space-y-8">
                            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                            <div className="text-center py-8">
                                <div className="text-6xl mb-4">ğŸ</div>
                                <h1 className="text-4xl font-bold text-grit-gradient mb-3 drop-shadow-lg">ã”è¤’ç¾è¨­å®š</h1>
                                <p className="text-gray-600 text-lg mb-4">
                                    ã€Œè‹¦ã—ã•ã€ã‚’ã€Œä¾¡å€¤ã‚ã‚‹é€šè²¨ã€ã¨ã—ã¦ã€è‡ªåˆ†ã«ã”è¤’ç¾ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†
                                </p>
                                
                                {/* ç¾åœ¨ã®ã‚¹ã‚³ã‚¢è¡¨ç¤º */}
                                <div className="mt-8 bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-md mx-auto">
                                    <div className="flex items-center justify-center space-x-3 mb-2">
                                        <span className="text-2xl">ğŸ†</span>
                                        <span className="text-lg font-semibold text-gray-800">ç¾åœ¨ã®ã‚¹ã‚³ã‚¢</span>
                                    </div>
                                    <div className="text-4xl font-extrabold text-grit-primary">
                                        {cumulativeScore.toLocaleString()}<span className="text-xl text-gray-500">pt</span>
                                    </div>
                                </div>
                            </div>

                            {/* æ–°ã—ã„ã”è¤’ç¾è¿½åŠ  */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                                    <span className="mr-3">â•</span>æ–°ã—ã„ã”è¤’ç¾ã‚’è¿½åŠ 
                                </h2>
                                
                                <form onSubmit={handleAddReward} className="space-y-6">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label className="block text-sm font-bold text-gray-800 mb-2">
                                                ç›®æ¨™ã‚¹ã‚³ã‚¢ <span className="text-red-500">*</span>
                                            </label>
                                            <input
                                                type="number"
                                                min="1"
                                                value={newReward.targetScore}
                                                onChange={(e) => setNewReward({ ...newReward, targetScore: e.target.value })}
                                                placeholder="ä¾‹ï¼š500"
                                                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                                required
                                            />
                                        </div>
                                        
                                        <div>
                                            <label className="block text-sm font-bold text-gray-800 mb-2">
                                                ã”è¤’ç¾å†…å®¹ <span className="text-red-500">*</span>
                                            </label>
                                            <input
                                                type="text"
                                                value={newReward.rewardContent}
                                                onChange={(e) => setNewReward({ ...newReward, rewardContent: e.target.value })}
                                                placeholder="ä¾‹ï¼šãŠæ°—ã«å…¥ã‚Šã®ã‚¹ã‚¤ãƒ¼ãƒ„ã‚’é£Ÿã¹ã‚‹"
                                                className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                                required
                                            />
                                        </div>
                                    </div>
                                    
                                    <button
                                        type="submit"
                                        className="w-full btn-grit text-white font-bold py-4 px-8 rounded-xl shadow-lg flex items-center justify-center space-x-2"
                                    >
                                        <span className="text-xl">â•</span>
                                        <span>ã”è¤’ç¾ã‚’è¿½åŠ </span>
                                    </button>
                                </form>
                            </div>

                            {/* ã”è¤’ç¾ä¸€è¦§ */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <h2 className="text-2xl font-bold text-gray-800 mb-8 flex items-center">
                                    <span className="mr-3">ğŸ</span>è¨­å®šæ¸ˆã¿ã®ã”è¤’ç¾
                                </h2>

                                {sortedRewards.length === 0 ? (
                                    <div className="text-center py-12 text-gray-600">
                                        <div className="text-4xl mb-4">ğŸ</div>
                                        <p className="text-lg font-semibold mb-2">ã¾ã ã”è¤’ç¾ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
                                        <p className="text-sm">ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æœ€åˆã®ã”è¤’ç¾ã‚’è¨­å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
                                    </div>
                                ) : (
                                    <div className="space-y-6">
                                        {sortedRewards.map((reward) => (
                                            <div
                                                key={reward.id}
                                                className={`border-2 rounded-xl p-8 transition-all shadow-lg ${
                                                    reward.isCompleted
                                                        ? 'border-green-300 bg-green-50'
                                                        : cumulativeScore >= reward.targetScore
                                                        ? 'border-grit-primary bg-green-50 animate-pulse'
                                                        : 'border-gray-200 bg-white hover:border-grit-primary'
                                                }`}
                                            >
                                                {editingId === reward.id ? (
                                                    /* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ */
                                                    <div className="space-y-6">
                                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                            <div>
                                                                <label className="block text-sm font-bold text-gray-800 mb-2">ç›®æ¨™ã‚¹ã‚³ã‚¢</label>
                                                                <input
                                                                    type="number"
                                                                    min="1"
                                                                    value={editForm.targetScore}
                                                                    onChange={(e) => setEditForm({ ...editForm, targetScore: e.target.value })}
                                                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                                                />
                                                            </div>
                                                            <div>
                                                                <label className="block text-sm font-bold text-gray-800 mb-2">ã”è¤’ç¾å†…å®¹</label>
                                                                <input
                                                                    type="text"
                                                                    value={editForm.rewardContent}
                                                                    onChange={(e) => setEditForm({ ...editForm, rewardContent: e.target.value })}
                                                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-grit-primary focus:outline-none transition-colors"
                                                                />
                                                            </div>
                                                        </div>
                                                        <div className="flex space-x-4">
                                                            <button
                                                                onClick={handleSaveEdit}
                                                                className="bg-green-500 text-white px-6 py-3 rounded-xl hover:bg-green-600 transition-colors shadow-lg flex items-center space-x-2"
                                                            >
                                                                <span>âœ…</span>
                                                                <span>ä¿å­˜</span>
                                                            </button>
                                                            <button
                                                                onClick={handleCancelEdit}
                                                                className="bg-gray-500 text-white px-6 py-3 rounded-xl hover:bg-gray-600 transition-colors shadow-lg flex items-center space-x-2"
                                                            >
                                                                <span>âŒ</span>
                                                                <span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    /* è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ */
                                                    <div className="flex justify-between items-start">
                                                        <div className="flex-1">
                                                            <div className="flex items-center space-x-3 mb-3">
                                                                <div className="text-3xl">
                                                                    {reward.isCompleted ? 'ğŸ‰' : 
                                                                     cumulativeScore >= reward.targetScore ? 'âœ¨' : 'ğŸ'}
                                                                </div>
                                                                
                                                                <div>
                                                                    <h3 className={`text-xl font-bold mb-1 ${
                                                                        reward.isCompleted ? 'text-green-700' : 'text-gray-800'
                                                                    }`}>
                                                                        {reward.rewardContent}
                                                                    </h3>
                                                                    <p className="text-sm text-gray-600 font-medium">
                                                                        ç›®æ¨™: {reward.targetScore.toLocaleString()}pt
                                                                    </p>
                                                                </div>
                                                            </div>

                                                            {/* é€²æ—ãƒãƒ¼ */}
                                                            <div className="mb-4 bg-gray-50 p-4 rounded-xl border border-gray-100">
                                                                <div className="flex justify-between text-sm text-gray-700 font-semibold mb-2">
                                                                    <span>é€²æ—çŠ¶æ³</span>
                                                                    <span>
                                                                        {Math.min(cumulativeScore, reward.targetScore).toLocaleString()} / {reward.targetScore.toLocaleString()}pt
                                                                    </span>
                                                                </div>
                                                                <div className="w-full bg-gray-200 rounded-full h-4">
                                                                    <div
                                                                        className={`h-4 rounded-full transition-all duration-700 ${
                                                                            reward.isCompleted || cumulativeScore >= reward.targetScore
                                                                                ? 'bg-grit-gradient'
                                                                                : 'bg-grit-gradient'
                                                                        }`}
                                                                        style={{
                                                                            width: `${Math.min((cumulativeScore / reward.targetScore) * 100, 100)}%`
                                                                        }}
                                                                    />
                                                                </div>
                                                                <div className="text-right text-sm text-gray-600 font-medium mt-2">
                                                                    {((cumulativeScore / reward.targetScore) * 100).toFixed(1)}%é”æˆ
                                                                </div>
                                                            </div>

                                                            {/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */}
                                                            {reward.isCompleted ? (
                                                                <div className="bg-green-50 p-4 rounded-xl border border-green-200">
                                                                    <div className="text-green-700 font-bold text-lg flex items-center space-x-2">
                                                                        <span>ğŸ†</span>
                                                                        <span>é”æˆæ¸ˆã¿ï¼</span>
                                                                    </div>
                                                                </div>
                                                            ) : cumulativeScore >= reward.targetScore ? (
                                                                <div className="bg-green-50 p-4 rounded-xl border border-green-200">
                                                                    <div className="text-green-700 font-bold text-lg flex items-center space-x-2">
                                                                        <span>ğŸ‰</span>
                                                                        <span>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã”è¤’ç¾ã‚’ã‚²ãƒƒãƒˆã—ã¾ã—ãŸï¼</span>
                                                                    </div>
                                                                </div>
                                                            ) : (
                                                                <div className="bg-gray-50 p-4 rounded-xl border border-gray-200">
                                                                    <div className="text-gray-700 font-semibold">
                                                                        ã‚ã¨ {(reward.targetScore - cumulativeScore).toLocaleString()}pt ã§é”æˆï¼
                                                                    </div>
                                                                </div>
                                                            )}
                                                        </div>

                                                        {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
                                                        {!reward.isCompleted && (
                                                            <div className="flex space-x-3 ml-6">
                                                                <button
                                                                    onClick={() => handleStartEdit(reward)}
                                                                    className="text-gray-600 hover:text-gray-700 p-3 rounded-xl hover:bg-gray-50 transition-all shadow-sm hover:shadow-md"
                                                                    title="ç·¨é›†"
                                                                >
                                                                    <span className="text-lg">âœï¸</span>
                                                                </button>
                                                                <button
                                                                    onClick={() => handleDelete(reward.id, reward.rewardContent)}
                                                                    className="text-red-500 hover:text-red-700 p-3 rounded-xl hover:bg-red-50 transition-all shadow-sm hover:shadow-md"
                                                                    title="å‰Šé™¤"
                                                                >
                                                                    <span className="text-lg">ğŸ—‘ï¸</span>
                                                                </button>
                                                            </div>
                                                        )}
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* ãƒ’ãƒ³ãƒˆ */}
                            <div className="bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl">
                                <div className="text-4xl text-center mb-6">ğŸ’¡</div>
                                <h3 className="text-2xl font-bold text-gray-800 mb-6 text-center">
                                    ã”è¤’ç¾è¨­å®šã®ã‚³ãƒ„
                                </h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 text-gray-700">
                                    <div className="bg-white p-4 rounded-xl shadow-sm">
                                        <div className="font-bold text-gray-800 mb-2 flex items-center space-x-2">
                                            <span>ğŸ¯</span>
                                            <span>ç¾å®Ÿçš„ãªç›®æ¨™</span>
                                        </div>
                                        <p className="text-sm">ç¾åœ¨ã®ã‚¹ã‚³ã‚¢ã‹ã‚‰è¦‹ã¦é”æˆå¯èƒ½ãªç›®æ¨™ã‚’è¨­å®šã—ã¾ã—ã‚‡ã†</p>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl shadow-sm">
                                        <div className="font-bold text-gray-800 mb-2 flex items-center space-x-2">
                                            <span>ğŸ“ˆ</span>
                                            <span>æ®µéšçš„ãªè¨­å®š</span>
                                        </div>
                                        <p className="text-sm">å°ã•ãªã”è¤’ç¾ã‹ã‚‰å¤§ããªã”è¤’ç¾ã¾ã§ã€è¤‡æ•°è¨­å®šã™ã‚‹ã¨ç¶™ç¶šã—ã‚„ã™ããªã‚Šã¾ã™</p>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl shadow-sm">
                                        <div className="font-bold text-gray-800 mb-2 flex items-center space-x-2">
                                            <span>âœ¨</span>
                                            <span>å…·ä½“çš„ãªå†…å®¹</span>
                                        </div>
                                        <p className="text-sm">ã€Œå¥½ããªã‚‚ã®ã‚’è²·ã†ã€ã‚ˆã‚Šã€Œã€‡ã€‡ã‚’é£Ÿã¹ã‚‹ã€ã€Œã€‡ã€‡ã‚’è²·ã†ã€ãªã©å…·ä½“çš„ã«</p>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl shadow-sm">
                                        <div className="font-bold text-gray-800 mb-2 flex items-center space-x-2">
                                            <span>ğŸ’ª</span>
                                            <span>è‡ªåˆ†ã¸ã®æŠ•è³‡</span>
                                        </div>
                                        <p className="text-sm">å˜ãªã‚‹æ¶ˆè²»ã ã‘ã§ãªãã€ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã‚„å¥åº·ã«é–¢ã™ã‚‹ã”è¤’ç¾ã‚‚åŠ¹æœçš„ã§ã™</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // ç¾åœ¨ã®ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º
            const renderCurrentView = () => {
                switch (currentView) {
                    case 'dashboard':
                        return <Dashboard />;
                    case 'record':
                        return <QuickRecord />;
                    case 'review':
                        return <WeeklyReview />;
                    case 'rewards':
                        return <RewardSettings />;
                    default:
                        return <Dashboard />;
                }
            };

            return (
                <div className="min-h-screen">
                    {/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                    <header className="bg-white shadow-lg sticky top-0 z-50">
                        <div className="container mx-auto px-4">
                            {/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}
                            <nav className="hidden md:flex justify-between items-center py-4">
                                {/* ãƒ­ã‚´ */}
                                <div className="flex items-center space-x-3">
                                    <div className="text-3xl">ğŸ”¥</div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-grit-gradient">GritTracker</h1>
                                        <p className="text-xs text-gray-500">ç²˜ã‚ŠåŠ›ã‚’å¯è¦–åŒ–ã™ã‚‹</p>
                                    </div>
                                </div>

                                {/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é …ç›® */}
                                <div className="flex space-x-1 bg-gray-100 rounded-full p-1">
                                    {navigationItems.map((item) => (
                                        <button
                                            key={item.key}
                                            onClick={() => setCurrentView(item.key)}
                                            className={`flex items-center px-6 py-3 rounded-full font-medium transition-all duration-200 ${
                                                currentView === item.key
                                                    ? 'btn-grit text-white shadow-lg transform scale-105'
                                                    : 'text-gray-600 hover:text-grit-primary hover:bg-white hover:shadow-md'
                                            }`}
                                        >
                                            <span className="mr-2 text-lg">{item.icon}</span>
                                            <div className="text-left">
                                                <div className="text-sm font-semibold">{item.label}</div>
                                                <div className="text-xs opacity-75">{item.description}</div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </nav>

                            {/* ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}
                            <div className="md:hidden">
                                <div className="flex justify-between items-center py-4">
                                    {/* ãƒ¢ãƒã‚¤ãƒ«ãƒ­ã‚´ */}
                                    <div className="flex items-center space-x-2">
                                        <div className="text-2xl">ğŸ”¥</div>
                                        <h1 className="text-xl font-bold text-grit-gradient">GritTracker</h1>
                                    </div>

                                    {/* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */}
                                    <button
                                        onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
                                        className="p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                                    >
                                        <span className="text-xl">â˜°</span>
                                    </button>
                                </div>

                                {/* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}
                                {isMobileMenuOpen && (
                                    <div className="border-t border-gray-200 py-4">
                                        <div className="grid grid-cols-2 gap-2">
                                            {navigationItems.map((item) => (
                                                <button
                                                    key={item.key}
                                                    onClick={() => {
                                                        setCurrentView(item.key);
                                                        setIsMobileMenuOpen(false);
                                                    }}
                                                    className={`flex flex-col items-center p-4 rounded-xl font-medium transition-all ${
                                                        currentView === item.key
                                                            ? 'btn-grit text-white shadow-lg'
                                                            : 'text-gray-600 hover:bg-gray-100'
                                                    }`}
                                                >
                                                    <span className="text-xl mb-2">{item.icon}</span>
                                                    <div className="text-sm font-semibold">{item.label}</div>
                                                    <div className="text-xs opacity-75">{item.description}</div>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </header>

                    {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
                    {renderCurrentView()}

                    {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}
                    <footer className="bg-white border-t border-gray-200 mt-16">
                        <div className="container mx-auto px-4 py-8">
                            <div className="text-center">
                                <div className="flex justify-center items-center space-x-2 mb-2">
                                    <div className="text-xl">ğŸ”¥</div>
                                    <span className="font-bold text-grit-gradient">GritTracker</span>
                                </div>
                                <p className="text-gray-600 text-sm mb-4">
                                    è‹¦ã—ã•ã‚’æˆé•·ã®è¨¼ã«å¤‰ãˆã‚‹ã€‚ã‚ãªãŸã®ç²˜ã‚ŠåŠ›ã‚’å¯è¦–åŒ–ã—ã€ã‚»ãƒ«ãƒ•ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚
                                </p>
                                <div className="flex justify-center space-x-6 text-sm text-gray-500">
                                    <span>ğŸ’ª ç²˜ã‚ŠåŠ›å‘ä¸Š</span>
                                    <span>ğŸ“ˆ æˆé•·å¯è¦–åŒ–</span>
                                    <span>ğŸ¯ ç›®æ¨™é”æˆ</span>
                                    <span>ğŸ‰ è‡ªå·±è‚¯å®šæ„ŸUP</span>
                                </div>
                                <div className="mt-4 text-center text-gray-500 text-sm">
                                    ğŸ¨ ç·‘ãƒ»é»’ç³»çµ±ã®é…è‰²ã¨ç™½ã‹ã‚‰ç·‘ã®èƒŒæ™¯<br/>
                                    ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™ ({gritLogs.length}ä»¶è¨˜éŒ²æ¸ˆ)
                                </div>
                            </div>
                        </div>
                    </footer>

                    {/* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ (ãƒ¢ãƒã‚¤ãƒ«) */}
                    <div className="md:hidden fixed bottom-6 right-6 z-40">
                        <button
                            onClick={() => setCurrentView('record')}
                            className={`w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-200 transform ${
                                currentView === 'record' 
                                    ? 'bg-gray-400 scale-95' 
                                    : 'btn-grit hover:scale-110'
                            } text-white`}
                        >
                            <span className="text-xl">âœï¸</span>
                        </button>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>