<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GritTracker - 粘り力を可視化する</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 元のオレンジ・ブルー配色に復元 */
        :root {
            --color-orange: #f5751e;
            --color-orange-light: #fbb977;
            --color-blue: #0ea5e9;
            --color-blue-dark: #0284c7;
        }
        
        /* スライダーのカスタムスタイル */
        input[type="range"].slider {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        /* WebKit (Chrome, Safari, Edge) */
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none !important;
            appearance: none !important;
            height: 24px !important;
            width: 24px !important;
            border-radius: 50% !important;
            background: linear-gradient(45deg, #f5751e, #0ea5e9) !important;
            cursor: pointer !important;
            border: 2px solid #ffffff !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
            transition: all 0.2s ease !important;
            position: relative !important;
            z-index: 2 !important;
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        }
        
        /* Firefox */
        .slider::-moz-range-thumb {
            height: 24px !important;
            width: 24px !important;
            border-radius: 50% !important;
            background: linear-gradient(45deg, #f5751e, #0ea5e9) !important;
            cursor: pointer !important;
            border: 2px solid #ffffff !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
            transition: all 0.2s ease !important;
        }
        
        .slider::-moz-range-thumb:hover {
            transform: scale(1.1) !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        }
        
        /* スライダートラック */
        .slider::-webkit-slider-track {
            height: 12px !important;
            border-radius: 6px !important;
            background: linear-gradient(to right, #f5751e, #fbb977, #0ea5e9) !important;
        }
        
        .slider::-moz-range-track {
            height: 12px !important;
            border-radius: 6px !important;
            border: none !important;
            background: linear-gradient(to right, #f5751e, #fbb977, #0ea5e9) !important;
        }
        
        /* グラデーション背景 */
        .bg-grit-gradient {
            background: linear-gradient(135deg, #f5751e 0%, #fbb977 50%, #0ea5e9 100%);
        }
        
        /* ボタンスタイル */
        .btn-grit {
            background: linear-gradient(135deg, #f5751e, #0ea5e9);
            transition: all 0.2s ease;
        }
        
        .btn-grit:hover {
            background: linear-gradient(135deg, #e65814, #0284c7);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(245, 117, 30, 0.3);
        }
        
        /* テキストグラデーション */
        .text-grit-gradient {
            background: linear-gradient(135deg, #f5751e, #0ea5e9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        function App() {
            const [difficulty, setDifficulty] = React.useState(3);
            const [comment, setComment] = React.useState('');
            const [records, setRecords] = React.useState([]);

            // LocalStorageからデータを読み込み
            React.useEffect(() => {
                const savedRecords = localStorage.getItem('gritTrackerRecords');
                if (savedRecords) {
                    setRecords(JSON.parse(savedRecords));
                }
            }, []);

            // データ保存機能
            const saveRecord = () => {
                if (!comment.trim()) {
                    alert('コメントを入力してください！');
                    return;
                }
                
                const newRecord = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' }),
                    difficulty: parseInt(difficulty),
                    comment: comment.trim(),
                    timestamp: new Date().toISOString()
                };
                
                const updatedRecords = [newRecord, ...records];
                setRecords(updatedRecords);
                localStorage.setItem('gritTrackerRecords', JSON.stringify(updatedRecords));
                
                // フォームリセット
                setComment('');
                setDifficulty(3);
                
                alert('記録を保存しました！🎉');
            };

            return (
                <div className="min-h-screen bg-grit-gradient p-8">
                    <div className="max-w-4xl mx-auto">
                        <h1 className="text-4xl md:text-5xl font-bold text-white mb-4 text-center drop-shadow-lg">
                            🔥 GritTracker
                        </h1>
                        <p className="text-center text-white/90 mb-8 text-lg drop-shadow">
                            粘り力を可視化する
                        </p>
                        
                        <div className="bg-white/95 backdrop-blur-sm rounded-xl shadow-2xl p-8 mb-6">
                            <h2 className="text-2xl font-bold text-grit-gradient mb-6">クイック記録</h2>
                            
                            <div className="mb-6">
                                <label className="block text-gray-700 font-semibold mb-3">
                                    苦しさレベル: {difficulty}
                                </label>
                                <input
                                    type="range"
                                    min="1"
                                    max="5"
                                    value={difficulty}
                                    onChange={(e) => setDifficulty(e.target.value)}
                                    className="w-full h-3 rounded-lg cursor-pointer slider"
                                />
                                <div className="flex justify-between text-sm text-gray-500 mt-2">
                                    <span>楽</span>
                                    <span>やや楽</span>
                                    <span>普通</span>
                                    <span>きつい</span>
                                    <span>超きつい</span>
                                </div>
                            </div>
                            
                            <div className="mb-6">
                                <label className="block text-gray-700 font-semibold mb-3">
                                    コメント
                                </label>
                                <textarea
                                    value={comment}
                                    onChange={(e) => setComment(e.target.value)}
                                    placeholder="今日頑張ったことを記録しよう..."
                                    className="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-orange-400 focus:ring-0 transition-colors"
                                    rows="4"
                                />
                            </div>
                            
                            <button 
                                onClick={saveRecord}
                                className="w-full btn-grit text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg"
                            >
                                📝 記録を保存
                            </button>
                        </div>
                        
                        <div className="text-center text-white/80 text-sm">
                            🎨 オレンジ・ブルーグラデーション配色<br/>
                            💾 データはブラウザに保存されます ({records.length}件記録済)
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>